#### 1. Context & Goal
- **Objective**: Implement granular progress reporting in `JobExecutor` and integrate it with `JobManager` to track distributed render progress.
- **Trigger**: `JobManager` currently notes that "JobExecutor doesn't currently emit progress events, so we can't update progress granularly unless we modify JobExecutor or wrap the adapter."
- **Impact**: Enables real-time progress tracking of distributed rendering jobs, allowing UI components (like the CLI or Studio) to display accurate completion status to users.

#### 2. File Inventory
- **Create**: None
- **Modify**:
  - `packages/infrastructure/src/orchestrator/job-executor.ts` - Add `onProgress` callback to `JobExecutionOptions` and invoke it when chunks complete.
  - `packages/infrastructure/src/orchestrator/job-manager.ts` - Pass an `onProgress` callback to `JobExecutor.execute` that updates the `JobStatus` in the `JobRepository`.
  - `packages/infrastructure/tests/job-executor.test.ts` - Add tests verifying the `onProgress` callback is called correctly.
  - `packages/infrastructure/tests/job-manager.test.ts` - Add tests verifying `JobManager` updates the repository incrementally during job execution.
- **Read-Only**:
  - `packages/infrastructure/src/types/job-status.ts`
  - `packages/infrastructure/src/types/job-spec.ts`

#### 3. Implementation Spec
- **Architecture**: Provide an optional `onProgress` callback in the `JobExecutionOptions` passed to `JobExecutor.execute()`. This callback should receive the number of `completedChunks` and the `totalChunks`. `JobManager.runJob` will provide this callback, using it to fetch the current job state from the repository, update `completedChunks` and `progress` (percentage), and save it back to the repository.
- **Pseudo-Code**:
  - In `JobExecutor`:
    - Add `onProgress?: (completedChunks: number, totalChunks: number) => void;` to `JobExecutionOptions`.
    - In the worker loop, after a chunk successfully completes and `completedChunks++` is incremented, check if `options.onProgress` exists.
    - If it does, call `options.onProgress(completedChunks, totalChunks)`.
  - In `JobManager`:
    - In `runJob()`, when calling `this.executor.execute(jobSpec, options)`, merge `options` with an `onProgress` callback.
    - The `onProgress` callback should fetch the job from `this.repository`, calculate `progress = Math.round((completedChunks / totalChunks) * 100)`, update `completedChunks` and `progress`, and save it back.
- **Public API Changes**:
  - `JobExecutionOptions` in `job-executor.ts` will gain a new optional property: `onProgress?: (completedChunks: number, totalChunks: number) => void`.
- **Dependencies**: None.
- **Cloud Considerations**: The `onProgress` update mechanism must be robust regardless of whether chunks are executing locally or on remote cloud adapters (AWS/GCP), which is guaranteed since `JobExecutor` coordinates the responses from `WorkerAdapter`.

#### 4. Test Plan
- **Verification**: `cd packages/infrastructure && npx vitest run tests/job-executor.test.ts tests/job-manager.test.ts`
- **Success Criteria**: All tests pass, specifically confirming that the `onProgress` callback is invoked correctly by `JobExecutor` and that `JobManager` incrementally updates the job state in the repository.
- **Edge Cases**:
  - Ensure progress updates correctly even with retry failures (only successful chunk completions should trigger progress increments).
  - Verify that progress does not exceed 100%.
- **Integration Verification**: Ensure that the addition of the callback does not interfere with the existing fail-fast and execution flow logic.
