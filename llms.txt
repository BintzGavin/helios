# Helios Engine

> Framework-agnostic programmatic video creation for the web

Helios is a modern engine for creating videos programmatically using standard web technologiesâ€”HTML, CSS, and JavaScript. Unlike Remotion (React-only), Helios works with any framework or vanilla JS.

## Quick Facts
- **License**: Elastic License 2.0 (free commercial use, no SaaS resale)
- **Status**: Beta / Self-Driving (Core: Stable v5.12+, Studio: Alpha v0.101+)
- **Frameworks**: React, Vue, Svelte, Solid, vanilla JS
- **Animation**: Standard CSS, Web Animations API (WAAPI), any animation library

## Core API

```typescript
import { Helios } from '@helios-project/core';

const helios = new Helios({
  duration: 10,  // seconds
  fps: 30,
  autoSyncAnimations: true, // Auto-sync CSS/WAAPI
  inputProps: { title: "Hello World" }, // Dynamic data via constructor
  captions: [{ id: "1", startTime: 0, endTime: 1000, text: "Welcome" }] // SRT string or objects
});

// Reactively subscribe to state changes
helios.subscribe(({ currentFrame, inputProps, availableAudioTracks }) => {
  // Drive animations with progress or props
  // availableAudioTracks is AudioTrackMetadata[] (id, kind, label, startTime, duration, src)
});

// CRITICAL: Ensure fonts, images, and media are ready before rendering
await helios.waitUntilStable();

helios.play();
```

## Packages
- `@helios-project/core` - Headless video engine (state, timeline, subscriptions)
- `@helios-project/player` - Web Component player (`<helios-player>`)
- `@helios-project/renderer` - Server-side rendering (Playwright, FFmpeg)
- `@helios-project/studio` - Browser-based development environment (Alpha)
- `@helios-project/cli` - Command-line interface (scaffolding, registry, studio, merge)

## Animation Approach
Helios uses native browser APIs, not proprietary hooks:

```css
/* Standard CSS animations work */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
.element { animation: fadeIn 1s ease-out; }
```
The engine controls `document.timeline.currentTime` to seek animations frame-accurately.

## Architecture
### Rendering Paths
1. **Canvas-to-Video** (MVP): WebCodecs API for Three.js, Pixi.js, WebGL
2. **DOM-to-Video**: Playwright screenshots for HTML/CSS/SVG

### Components
- **Helios class**: Headless state machine (currentFrame, isPlaying, etc.)
- **Framework adapters**: React hook, Vue composable, Svelte store, Solid signal
- **Web Component**: `<helios-player>` for browser preview
- **Renderer**: FFmpeg with piped frames (no temp files)

## vs Remotion
| | Helios | Remotion |
|---|--------|----------|
| Framework | Any | React only |
| Animation | CSS, WAAPI | `interpolate()`, `spring()` |
| Pricing | Free | $100+/mo for 4+ devs |
| Maturity | Beta | Production-ready |
| Distributed rendering | Local (Beta) / Cloud (Planned) | Available |

## Agent Skills
Skills for AI agents are in `.agents/skills/helios/`:
- `core/SKILL.md` - Core API patterns, state management, subscriptions
- `renderer/SKILL.md` - Rendering pipeline usage
- `player/SKILL.md` - Player component usage
- `studio/SKILL.md` - Studio usage and extensions
- `cli/SKILL.md` - CLI usage and scaffolding

## Key Files for Agents
- `README.md` - Vision document
- `docs/BACKLOG.md` - Feature backlog
- `docs/PROGRESS-*.md` - Completed work (per domain)
- `docs/status/[ROLE].md` - Domain-specific status
- `.sys/llmdocs/context-*.md` - Architecture summaries
- `packages/core/src/index.ts` - Core public API
- `packages/player/src/index.ts` - Player public API
- `packages/renderer/src/index.ts` - Renderer public API

## Diagnostics
```typescript
const report = await Helios.diagnose();
// {
//   waapi: boolean,
//   webCodecs: boolean,
//   videoCodecs: { h264: boolean, ... },
//   audioCodecs: { aac: boolean, ... },
//   videoDecoders: { h264: boolean, ... },
//   audioDecoders: { aac: boolean, ... }
// }
```

## Roadmap
### V1.x (Active)
- **Helios Studio**: Alpha v0.101+ (Stacked Timeline, Audio Mixer, Component Registry UI, Render Presets, Open in Editor)
- **CLI**: Beta v0.12+ (Component Registry, Project Scaffolding, Auto-install, Merge Command)
- **Core**: Stable v5.12+ (Active Clips, Input Schema, Audio Fade Easing, Headless Audio, WebVTT)
- **Player**: Feature Complete v0.70+ (Audio Metering, Snapshot Export, Diagnostics UI, Responsive Images)
- **Renderer**: Stable v1.74+ (Local Distributed Rendering, Enhanced Diagnostics, Smart Codec Selection)

### AI Integration
- **Studio MCP Server**: Inspect, create, and render compositions via LLM tools (Done)
- **System Prompt**: Programmatic context generation for agents (Done)
- **Helios Assistant**: Context-aware documentation search (Done)

### V2 (Next)
- Distributed rendering (Cloud Adapters)
- Registry Commands (CLI expansion)
- Advanced audio engine (Tone.js integration)

### V3 (Future)
- Native Node.js encoding (beamcoder)

## Links
- Repository: https://github.com/gavinbintz/helios
- Documentation: ./docs/
- Examples: ./examples/
- Agent Prompts: ./docs/prompts/
