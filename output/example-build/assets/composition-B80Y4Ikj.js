(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function i(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(e){if(e.ep)return;e.ep=!0;const s=i(e);fetch(e.href,s)}})();class y{state;subscribers=new Set;animationFrameId=null;syncWithDocumentTimeline=!1;constructor(t){this.state={...t,currentFrame:0,isPlaying:!1}}setState(t){this.state={...this.state,...t},this.notifySubscribers()}getState(){return this.state}subscribe(t){return this.subscribers.add(t),t(this.state),()=>this.unsubscribe(t)}unsubscribe(t){this.subscribers.delete(t)}notifySubscribers(){for(const t of this.subscribers)t(this.state)}play(){this.state.isPlaying||(this.setState({isPlaying:!0}),this.animationFrameId=requestAnimationFrame(this.tick))}pause(){this.state.isPlaying&&(this.setState({isPlaying:!1}),this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null))}seek(t){const i=Math.max(0,Math.min(t,this.state.duration*this.state.fps));this.setState({currentFrame:i}),typeof document<"u"&&document.timeline&&i/this.state.fps*1e3}bindToDocumentTimeline(){if(typeof document>"u"||!document.timeline){console.warn("document.timeline is not available.");return}this.syncWithDocumentTimeline=!0;const t=()=>{if(!this.syncWithDocumentTimeline)return;const i=document.timeline.currentTime;if(i!==null&&typeof i=="number"){const r=Math.round(i/1e3*this.state.fps);r!==this.state.currentFrame&&this.setState({currentFrame:r})}requestAnimationFrame(t)};requestAnimationFrame(t)}unbindFromDocumentTimeline(){this.syncWithDocumentTimeline=!1}tick=()=>{if(!this.state.isPlaying)return;if(this.syncWithDocumentTimeline){this.animationFrameId=requestAnimationFrame(this.tick);return}const t=this.state.duration*this.state.fps,i=this.state.currentFrame+1;if(i>=t){this.setState({currentFrame:t-1}),this.pause();return}this.setState({currentFrame:i}),this.animationFrameId=requestAnimationFrame(this.tick)}}const o=document.getElementById("composition-canvas"),n=o.getContext("2d"),h=()=>{o.width=window.innerWidth,o.height=window.innerHeight,console.log(`Canvas resized to ${o.width}x${o.height}`)};h();window.addEventListener("resize",h);const m=5,d=30,l=new y({duration:m,fps:d});l.bindToDocumentTimeline();function b(a){const i=a/d*1e3%(m*1e3)/(m*1e3),{width:r,height:e}=o;n.fillStyle="#111",n.fillRect(0,0,r,e);const s=i*r,c=e/2,f=50;n.fillStyle="royalblue",n.beginPath(),n.arc(s,c,f,0,Math.PI*2),n.fill();const u=100;n.save(),n.translate(r/2,e/2),n.rotate(i*Math.PI*2),n.fillStyle="tomato",n.fillRect(-u/2,-u/2,u,u),n.restore()}l.subscribe(a=>{b(a.currentFrame)});window.helios=l;
